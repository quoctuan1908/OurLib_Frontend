import{_ as m,p as g,o as d,c,a,w as r,v as l,t as f,x as _,d as i,f as h,h as w}from"./index-V0BQvkh0.js";const v={name:"UserForm",data(){return{loginData:{},message:null}},components:{},methods:{async handleLogin(){const n=new FormData;n.append("data",JSON.stringify(this.loginData));let e=await g.login(n);e.data.statusCode===200?(localStorage.setItem("token",JSON.stringify(e.data.token)),localStorage.setItem("name",e.data.name),localStorage.setItem("id",e.data.id),localStorage.setItem("role",e.data.role),localStorage.setItem("avatar",e.data.avatar),this.emitter.emit("logged",{isLogged:!0,name:e.data.name,avatar:e.data.avatar}),this.$router.push({name:"home"})):this.message=e.data.message},gotoSignUp(){this.$router.push({name:"signup"})}}},y={class:"form-control form-custom"},b=a("h1",{class:"form-title"},"Login",-1),S={class:"mb-3"},D=a("label",{for:"exampleInputEmail1",class:"form-label"},"Username",-1),L={class:"mb-3"},x=a("label",{for:"exampleInputPassword1",class:"form-label"},"Password",-1),I=a("br",null,null,-1);function k(n,e,p,u,t,s){return d(),c("form",y,[b,a("div",S,[D,r(a("input",{type:"username",name:"username",class:"form-control form-input-custom icon-custom",id:"exampleInputEmail1","aria-describedby":"emailHelp","onUpdate:modelValue":e[0]||(e[0]=o=>t.loginData.username=o),placeholder:" Type your username",required:""},null,512),[[l,t.loginData.username]])]),a("div",L,[x,r(a("input",{type:"password",name:"password",class:"form-control form-input-custom icon-custom",id:"exampleInputPassword1","onUpdate:modelValue":e[1]||(e[1]=o=>t.loginData.password=o),placeholder:" Type your password",required:""},null,512),[[l,t.loginData.password]])]),a("div",{id:"message",class:_(this.message?"alert alert-warning":"")},f(this.message),3),a("button",{type:"submit",class:"btn btn-primary",onClick:e[2]||(e[2]=i((...o)=>s.handleLogin&&s.handleLogin(...o),["prevent"]))},"Login"),I,a("span",{onClick:e[3]||(e[3]=i((...o)=>s.gotoSignUp&&s.gotoSignUp(...o),["prevent"])),class:"link-primary link-custom"},"Don't have account? Sign up now")])}const U=m(v,[["render",k]]),C={name:"LoginView",data(){return{}},components:{LoginForm:U}};function V(n,e,p,u,t,s){const o=w("LoginForm");return d(),c("div",null,[h(o,{class:"formCustom"})])}const N=m(C,[["render",V]]);export{N as default};
