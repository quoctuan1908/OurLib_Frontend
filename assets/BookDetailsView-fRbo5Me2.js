import{_ as u,n as m,o,c as n,a as t,d as p,t as e,k as l,F as f,r as g,l as h,g as b,h as w}from"./index-DBDSQuPs.js";const k={name:"DetailCard",props:{data:{type:Object,required:!0},borrowEvent:{type:Function}},data(){return{apiImagePath:"https://ourlib-backend.onrender.com/public/data/uploads/",publishedDate:null}},methods:{format_date(s){s&&(this.publishedDate=m(String(s)).format("DD/MM/YYYY"))}},updated(){this.format_date(this.data.namxuatban)}},v={class:"container p-4"},D={class:"row"},y={class:"col-md-4 text-center"},B=["src"],$={class:""},x={class:"col-md-8"},C=t("i",{class:"fa-solid fa-star yellow"},null,-1),E=t("i",{class:"fa-solid fa-eye"},null,-1),S={class:""},q={class:"fs-2 fw-normal"},I={class:"fs-3"},M={class:"fs-4"},Y={class:""};function F(s,i,r,_,c,d){return o(),n("div",v,[t("div",D,[t("div",y,[t("img",{src:c.apiImagePath+this.data.image,class:"card-image-top image-size borderCustom"},null,8,B),t("div",$,[t("button",{class:"col btn-custom",onClick:i[0]||(i[0]=p((...a)=>r.borrowEvent&&r.borrowEvent(...a),["prevent"]))},"Borrow")])]),t("div",x,[t("h1",null,e(this.data.tensach),1),t("h6",null,[C,l(e(this.data.rate+"/10")+", ",1),E,l(e(this.data.view),1)]),t("div",S,[t("p",q,e(this.data.tacgia),1),t("p",I,"Published in: "+e(this.publishedDate),1),t("p",M,"Remains: "+e(this.data.soquyen||"out of stock"),1),(o(!0),n(f,null,g(this.data.category,a=>(o(),n("span",{key:a},"tag,"))),128)),t("div",Y,e(this.data.description),1)])])])])}const P=u(k,[["render",F]]),V={data(){return{data:[]}},components:{DetailCard:P},methods:{async fetchBookDetail(){this.data=await h.getOne(this.$route.query.id),console.log(this.data)},refreshData(){this.fetchBookDetail()},async borrowBook(){if(localStorage.getItem("token")){const s=await h.borrow(localStorage.getItem("id"),this.$route.query.id,this.data.tensach,localStorage.getItem("name"));this.emitter.emit("popUpMessage",{message:"Requested."}),console.log(s)}else this.$router.push({name:"login"})}},mounted(){this.refreshData()}};function N(s,i,r,_,c,d){const a=w("DetailCard");return o(),b(a,{data:this.data,borrowEvent:d.borrowBook},null,8,["data","borrowEvent"])}const R=u(V,[["render",N]]);export{R as default};
